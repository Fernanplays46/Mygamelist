{% extends "base.html" %}
{% block title %}Admin · MyGameList{% endblock %}
{% block content %}
<h1>Panel de administración</h1>

<section class="card">
  <h2>Crear videojuego</h2>
  <form action="/admin/crear" method="post" class="form">
    <label>Título <input name="titulo" required></label>
    <label>Plataforma <input name="plataforma" required></label>
    <label>Género <input name="genero" required></label>
    <label>Año <input type="number" name="fecha" value="2024" required></label>
    <label>Puntuación <input type="number" name="puntuacion" value="0"></label>
    <label>Portada URL <input name="portada_url" placeholder="https://..."></label>
    <label>Descripción <textarea name="descripcion"></textarea></label>
    <button type="submit">Crear</button>
  </form>
</section>

<section class="card">
  <h2>Juegos existentes</h2>
  <table class="table">
    <thead><tr><th>ID</th><th>Título</th><th>Plataforma</th><th>Género</th><th>Año</th><th></th></tr></thead>
    <tbody>
    {% for j in juegos %}
      <tr>
        <td>{{ j.id }}</td>
        <td>{{ j.titulo }}</td>
        <td>{{ j.plataforma }}</td>
        <td>{{ j.genero }}</td>
        <td>{{ j.fecha }}</td>
        <td>
          <form action="/admin/borrar" method="post" onsubmit="return confirm('¿Borrar {{ j.titulo }}?')">
            <input type="hidden" name="juego_id" value="{{ j.id }}"/>
            <button type="submit">Borrar</button>
          </form>
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}
